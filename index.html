<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ë—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</title>
  <style>
    :root { --bg1:#0b1220; --bg2:#1b2a4a; }
    * { box-sizing: border-box; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:#fff;
      background:
        radial-gradient(1200px 800px at 20% 20%, #ff4d7d33, transparent 60%),
        radial-gradient(900px 700px at 80% 30%, #7c5cff33, transparent 55%),
        linear-gradient(160deg,var(--bg1),var(--bg2));
      overflow:hidden;
    }
    .card{
      width:min(720px,calc(100vw - 24px));
      padding:28px 22px;
      border-radius:22px;
      background:rgba(255,255,255,0.08);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.15);
      box-shadow:0 20px 60px rgba(0,0,0,0.35);
      text-align:center;
    }
    h1{ margin:0 0 10px; font-size:clamp(22px,4vw,34px); }
    p{ margin:0 0 18px; opacity:.9; font-size:16px; line-height:1.35; }

    .stage{
      position:relative;
      margin:18px auto 0;
      width:min(560px,calc(100vw - 80px));
      height:240px;
      border-radius:18px;
      background:rgba(255,255,255,0.06);
      border:1px dashed rgba(255,255,255,0.25);
      overflow:hidden;
    }
    .btn{
      position:absolute;
      padding:12px 18px;
      border:0;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
      user-select:none;
      transform:translate(-50%,-50%);
      transition:transform .08s linear;
      font-size:16px;
    }
    #yesBtn{
      background:#ff3b6b; color:#fff;
      left:35%; top:55%;
      box-shadow:0 10px 30px rgba(255,59,107,0.35);
    }
    #noBtn{
      background:#fff; color:#111;
      left:65%; top:35%;
      box-shadow:0 10px 30px rgba(255,255,255,0.2);
    }

    .msg{ margin-top:16px; font-size:18px; font-weight:650; min-height:28px; }
    .tiny{ margin-top:22px; font-size:12px; opacity:.7; }

    .page{ display:none; }
    .page.active{ display:block; }

    .photo-wrap{
      margin:16px auto 0;
      width:min(560px,100%);
      border-radius:18px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.06);
      padding:14px;
      text-align:left;
    }
    .photo{
      width:100%;
      aspect-ratio:16/9;
      border-radius:14px;
      object-fit:cover;
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(255,255,255,0.12);
      display:block;
    }
    .row{
      display:flex;
      gap:10px;
      margin-top:12px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .inline-btn{
      padding:10px 14px;
      border:0;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
      color:#111;
      background:#fff;
    }
    .inline-btn.primary{
      color:#fff;
      background:#ff3b6b;
    }
    input[type="file"]{ display:none; }

    .caption{
      margin:10px 0 0;
      font-size:14px;
      opacity:.9;
      line-height:1.35;
    }
  </style>
</head>

<body>
  <div class="card">
    <!-- PAGE 1 -->
    <section class="page active" id="page1">
      <h1>–ë—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíò</h1>
      <p>–£ –º–µ–Ω—è –∫ —Ç–µ–±–µ –æ–¥–∏–Ω –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å.</p>

      <div class="stage" id="stage" aria-label="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ">
        <button class="btn" id="yesBtn" type="button">–î–∞</button>
        <button class="btn" id="noBtn" type="button">–ù–µ—Ç</button>
      </div>

      <div class="msg" id="msg"></div>
      <div class="tiny">–•–æ—Ä–æ—à–æ –ø—Ä–∏–¥—É–º–∞–ª, –¥–∞?</div>
    </section>

    <!-- PAGE 2 -->
    <section class="page" id="page2">
      <h1>–£—Ä–∞! ‚ù§Ô∏è</h1>

      <div class="photo-wrap">
        <!-- –í–∞—Ä–∏–∞–Ω—Ç –¥–ª—è GitHub: –ø–æ–ª–æ–∂–∏ —Ñ–æ—Ç–æ —Ä—è–¥–æ–º –∏ –Ω–∞–∑–æ–≤–∏ photo.jpg -->
        <!-- –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –¥—Ä—É–≥–æ–µ –∏–º—è ‚Äî –ø–æ–º–µ–Ω—è–π src –Ω–∏–∂–µ -->
        <img class="photo" id="photo" src="photo.jpg" alt="–ù–∞—à–µ —Ñ–æ—Ç–æ" />

        <div class="row">
          <label class="inline-btn" for="fileInput">–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</label>
          <button class="inline-btn primary" id="againBtn" type="button">–ï—â—ë —Ä–∞–∑ ‚Äú–î–∞‚Äù üòä</button>
          <input id="fileInput" type="file" accept="image/*" />
        </div>

        <p class="caption" id="caption">–®–æ —Ç—ã, –≥–æ–ª–æ–≤–∞, —Å–æ–≥–ª–∞—Å–∏–ª–∞—Å—å, –ø–æ–ª—É—á–∞–µ—Ç—Å—è.</p>
      </div>
    </section>
  </div>

  <script>
    // --- page switch ---
    const showPage = (id) => {
      for (const p of document.querySelectorAll('.page')) p.classList.remove('active');
      document.getElementById(id).classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    // --- ‚Äú–ù–µ—Ç‚Äù —É–±–µ–≥–∞–µ—Ç ---
    const stage = document.getElementById('stage');
    const noBtn  = document.getElementById('noBtn');
    const yesBtn = document.getElementById('yesBtn');
    const msg = document.getElementById('msg');

    function clamp(v, min, max) { return Math.max(min, Math.min(max, v)); }

    function moveNoButton(avoidX, avoidY) {
      const rect = stage.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();
      const pad = 16;

      const w = rect.width, h = rect.height;

      const minX = pad + btnRect.width / 2;
      const maxX = w - pad - btnRect.width / 2;
      const minY = pad + btnRect.height / 2;
      const maxY = h - pad - btnRect.height / 2;

      const curLeft = parseFloat(noBtn.style.left) || (w * 0.65);
      const curTop  = parseFloat(noBtn.style.top)  || (h * 0.35);

      let targetX = curLeft, targetY = curTop;

      if (avoidX != null && avoidY != null) {
        const dx = curLeft - avoidX;
        const dy = curTop  - avoidY;
        const len = Math.hypot(dx, dy) || 1;
        const step = 120;
        targetX = curLeft + (dx / len) * step;
        targetY = curTop  + (dy / len) * step;
      } else {
        targetX = minX + Math.random() * (maxX - minX);
        targetY = minY + Math.random() * (maxY - minY);
      }

      targetX = clamp(targetX, minX, maxX);
      targetY = clamp(targetY, minY, maxY);

      noBtn.style.left = targetX + "px";
      noBtn.style.top  = targetY + "px";
    }

    // —Å—Ç–∞–≤–∏–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ px
    function initPositions() {
      const r = stage.getBoundingClientRect();
      yesBtn.style.left = (r.width  * 0.35) + "px";
      yesBtn.style.top  = (r.height * 0.55) + "px";
      noBtn.style.left  = (r.width  * 0.65) + "px";
      noBtn.style.top   = (r.height * 0.35) + "px";
    }
    window.addEventListener('resize', initPositions);
    initPositions();

    noBtn.addEventListener('mouseenter', () => moveNoButton());

    stage.addEventListener('mousemove', (e) => {
      const s = stage.getBoundingClientRect();
      const mx = e.clientX - s.left;
      const my = e.clientY - s.top;
      const bx = parseFloat(noBtn.style.left);
      const by = parseFloat(noBtn.style.top);
      if (Math.hypot(mx - bx, my - by) < 110) moveNoButton(mx, my);
    });

    stage.addEventListener('touchstart', (e) => {
      const t = e.touches[0];
      if (!t) return;
      const s = stage.getBoundingClientRect();
      const mx = t.clientX - s.left;
      const my = t.clientY - s.top;
      const bx = parseFloat(noBtn.style.left);
      const by = parseFloat(noBtn.style.top);
      if (Math.hypot(mx - bx, my - by) < 140) moveNoButton(mx, my);
    }, { passive: true });

    noBtn.addEventListener('click', (e) => {
      e.preventDefault();
      moveNoButton();
      msg.textContent = "";
    });

    yesBtn.addEventListener('click', () => showPage('page2'));

    // --- page2: photo selection (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ---
    const fileInput = document.getElementById('fileInput');
    const photo = document.getElementById('photo');
    const againBtn = document.getElementById('againBtn');

    fileInput.addEventListener('change', () => {
      const file = fileInput.files?.[0];
      if (!file) return;
      photo.src = URL.createObjectURL(file);
    });

    againBtn.addEventListener('click', () => {
      showPage('page1');
      msg.textContent = "";
    });
  </script>
</body>
</html>
